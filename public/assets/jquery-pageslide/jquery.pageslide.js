/*
 * jQuery pageSlide
 * Version 2.0
 * http://srobbin.com/jquery-pageslide/
 *
 * jQuery Javascript plugin which slides a webpage over to reveal an additional interaction pane.
 *
 * Copyright (c) 2011 Scott Robbin (srobbin.com)
 * Dual licensed under the MIT and GPL licenses.
*/
(function(a){function f(b,d){if(b.indexOf("#")===0)a(b).clone(!0).appendTo(c.empty()).show();else{if(d){var e=a("<iframe />").attr({src:b,frameborder:0,hspace:0}).css({width:"100%",height:"100%"});c.html(e)}else c.load(b);c.data("localEl",!1)}}function g(a,e){var f=c.outerWidth(!0),g={},h={};if(c.is(":visible")||d)return;d=!0;switch(a){case"left":c.css({left:"auto",right:"-"+f+"px"}),g["margin-left"]="-="+f,h.right="+="+f;break;default:c.css({left:"-"+f+"px",right:"auto"}),g["margin-left"]="+="+f,h.left="+="+f}b.animate(g,e),c.show().animate(h,e,function(){d=!1})}var b=a("body"),c=a("#pageslide"),d=!1,e;c.length==0&&(c=a("<div />").attr("id","pageslide").css("display","none").appendTo(a("body"))),a.fn.pageslide=function(b){var d=this;d.click(function(d){var f=a(this),g=a.extend({href:f.attr("href")},b);d.preventDefault(),d.stopPropagation(),c.is(":visible")&&f[0]==e?a.pageslide.close():(a.pageslide(g),e=f[0])})},a.fn.pageslide.defaults={speed:200,direction:"right",modal:!1,iframe:!0,href:null},a.pageslide=function(b){var d=a.extend({},a.fn.pageslide.defaults,b);c.is(":visible")&&c.data("direction")!=d.direction?a.pageslide.close(function(){f(d.href,d.iframe),g(d.direction,d.speed)}):(f(d.href,d.iframe),c.is(":hidden")&&g(d.direction,d.speed)),c.data(d)},a.pageslide.close=function(c){var e=a("#pageslide"),f=e.outerWidth(!0),g=e.data("speed"),h={},i={};if(e.is(":hidden")||d)return;d=!0;switch(e.data("direction")){case"left":h["margin-left"]="+="+f,i.right="-="+f;break;default:h["margin-left"]="-="+f,i.left="-="+f}e.animate(i,g),b.animate(h,g,function(){e.hide(),d=!1,typeof c!="undefined"&&c()})},c.click(function(a){a.stopPropagation()}),a(document).bind("click keyup",function(b){if(b.type=="keyup"&&b.keyCode!=27)return;c.is(":visible")&&!c.data("modal")&&a.pageslide.close()})})(jQuery);